name = "burocrazia-zero-worker"
main = "backend/src/index.ts"
compatibility_date = "2024-01-01"

# D1 Database Binding
[[d1_databases]]
binding = "DB"
database_name = "burocrazia-zero-db"
database_id = "4bf3015a-bc01-497a-ae31-72f9e72847f2"

# Cron trigger for email queue processing (runs every 5 minutes)
[triggers]
crons = ["*/5 * * * *"]

# Secrets (to be set via wrangler CLI or Cloudflare Dashboard)
# GEMINI_API_KEY - Google Gemini API key for AI operation identification
# PAYPAL_CLIENT_ID - PayPal Client ID for payment processing
# PAYPAL_CLIENT_SECRET - PayPal Client Secret for payment processing
# PAYPAL_WEBHOOK_ID - PayPal Webhook ID for webhook signature verification
# PAYPAL_API_BASE - PayPal API base URL (sandbox: https://api-m.sandbox.paypal.com, live: https://api-m.paypal.com)
# BREVO_API_KEY - Brevo API key for sending email notifications (get from https://app.brevo.com)

[build]
command = "npm install"

# Non-secret environment variables
# Note: Update these values with your actual email addresses before deployment
# These are stored in plaintext in version control, which is acceptable for non-sensitive configuration
[vars]
COMMISSION_AMOUNT = "10"  # Service commission amount in EUR
BREVO_SENDER_EMAIL = "gaetanosmario@gmail.com"  # Sender email address (must be verified in your Brevo account)
OPERATOR_EMAIL = "gaetanosmario@gmail.com"  # Operator's email address to receive payment notifications
